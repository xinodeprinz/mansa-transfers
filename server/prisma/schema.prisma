generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id        String @id @default(uuid()) @db.Uuid
  firstName String @map("first_name")
  lastName  String @map("last_name")
  email     String @unique
  phone     String @unique
  password  String

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("users")
}

model Product {
  id          String  @id @default(uuid()) @db.Uuid
  title       String  @unique
  image       String
  description String?
  price       Decimal @db.Decimal(12, 2)
  quantity    Int
  slug        String  @unique

  payments Payment[]

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([slug])
  @@map("products")
}

model Payment {
  id        String @id @default(uuid()) @db.Uuid
  productId String @map("product_id") @db.Uuid
  reference String
  name      String
  email     String

  product Product @relation(fields: [productId], references: [id], onDelete: Restrict)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([productId])
  @@index([reference])
  @@map("payments")
}
